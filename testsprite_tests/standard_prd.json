{
  "meta": {
    "project": "ODIADEV Edge-TTS Platform",
    "date": "2025-08-31",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "ODIADEV Edge-TTS is a Nigeria-first, self-hosted text-to-speech platform that leverages Microsoft Edge voices via a clean REST API. It includes a web demo that supports autoplay or instant tap-to-play fallback, and a Windows console tool for quick audio generation. It is designed for fast, natural voiceovers, deployable easily on EC2 t3.small instances.",
  "core_goals": [
    "Achieve P95 time-to-first-audio under 6 seconds for 20-120 words using default settings on t3.small instance.",
    "Ensure 100% success rate for audio generation via console tool and at least 95% success for the web demo including autoplay or tap-to-play functionality.",
    "Provide a zero-manual-setup experience where users can deploy using EC2 user-data and immediately access the service API and docs.",
    "Focus on Nigeria-first defaults including voice selections and audio formats optimized for local network conditions."
  ],
  "key_features": [
    "REST API with endpoints for health check, voice listing (filtered to Nigerian voices by default), and text-to-speech synthesis supporting multiple output formats and voice parameters.",
    "API key-based authentication via 'X-API-Key' header with optional enforcement.",
    "Web demo interface supporting input of API base URL, key, voice selection, format choice, and script entry; supports autoplay with fallback tap-to-play and status indicators.",
    "Windows PowerShell console tool for generating ~60 second viral audio clips saved locally and auto-playing after generation.",
    "One-click installation and deployment on Amazon Linux 2023 or Ubuntu 22.04 on EC2 t3.small instances using hardened installer, systemd service, Gunicorn web server, and Nginx reverse proxy.",
    "Robust rate limiting implemented per IP with plans for Redis upgrade in future versions.",
    "Environment configuration for customization including API keys, required auth, CORS origins, voice filtering, max characters limit, and rate limits."
  ],
  "user_flow_summary": [
    "Creator visits the web demo at /docs, optionally with pre-filled query parameters for API, key, voice, format, and text; loads available voices filtered to Nigerian accents; enters or modifies script text; clicks generate; audio attempts autoplay or shows tap-to-play fallback for manual trigger; user downloads MP3 file if desired.",
    "Marketer runs the PowerShell console tool with parameters pointing to the deployed API; the tool submits a text-to-speech request; receives and saves the MP3 audio locally; immediately plays the audio through the default player.",
    "Ops engineer launches a t3.small EC2 instance with the provided user-data installer script; after boot, verifies the service is up by visiting the / endpoint and /docs interface; uses health check API to confirm system and voice availability; performs test syntheses to validate successful deployment."
  ],
  "validation_criteria": [
    "Service boots up via user-data installer and endpoints / and /docs respond with expected JSON and HTML respectively.",
    "GET /voices endpoint returns a list of available voices, filtered to Nigerian voices when configured, with at least one voice present.",
    "POST /api/speak synthesizes 20-120 word text requests in P95 â‰¤ 6 seconds and returns audio files greater than 100KB in size.",
    "Web demo autoplays generated audio or presents tap-to-play prompt and provides a download button for the MP3.",
    "Console tool successfully generates and saves the viral audio clip and auto plays it upon completion without error.",
    "API enforces authentication when enabled and rejects unauthenticated requests with 401 status.",
    "Rate limiting effectively restricts request rates per IP to configured thresholds.",
    "System health endpoint /health consistently reports service status and voice counts and never causes provisioning to block."
  ],
  "code_summary": {
    "tech_stack": [
      "Python",
      "Flask",
      "edge-tts",
      "gunicorn",
      "nginx",
      "systemd",
      "PowerShell",
      "HTML5",
      "JavaScript"
    ],
    "features": [
      {
        "name": "Health Check API",
        "description": "Lightweight health endpoint that checks system status and voice availability",
        "files": [
          "app.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "ODIADEV Edge-TTS Health API",
            "version": "1.0.0",
            "description": "Health check endpoint for ODIADEV Edge-TTS system"
          },
          "paths": {
            "/health": {
              "get": {
                "summary": "Get system health status",
                "description": "Returns system health information including voice count and hash",
                "responses": {
                  "200": {
                    "description": "Health status",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "ok": {
                              "type": "boolean"
                            },
                            "voices": {
                              "type": "integer"
                            },
                            "ng_voices": {
                              "type": "integer"
                            },
                            "hash": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Voice List API",
        "description": "Retrieves available Microsoft Edge TTS voices, filtered for Nigerian voices by default",
        "files": [
          "app.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "ODIADEV Edge-TTS Voices API",
            "version": "1.0.0",
            "description": "Voice list endpoint for ODIADEV Edge-TTS system"
          },
          "paths": {
            "/voices": {
              "get": {
                "summary": "Get available voices",
                "description": "Returns list of available TTS voices",
                "responses": {
                  "200": {
                    "description": "List of voices",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "ok": {
                              "type": "boolean"
                            },
                            "voices": {
                              "type": "array",
                              "items": {
                                "type": "object",
                                "properties": {
                                  "ShortName": {
                                    "type": "string"
                                  },
                                  "Locale": {
                                    "type": "string"
                                  }
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Text-to-Speech API",
        "description": "Converts text to speech using Microsoft Edge TTS voices with rate, volume, and pitch controls",
        "files": [
          "app.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "ODIADEV Edge-TTS Speech API",
            "version": "1.0.0",
            "description": "Text-to-speech endpoint for ODIADEV Edge-TTS system"
          },
          "paths": {
            "/api/speak": {
              "post": {
                "summary": "Convert text to speech",
                "description": "Generates audio from text using specified voice and parameters",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "text"
                        ],
                        "properties": {
                          "text": {
                            "type": "string",
                            "description": "Text to convert to speech",
                            "maxLength": 800
                          },
                          "voice": {
                            "type": "string",
                            "description": "Voice to use (default: en-NG-EzinneNeural)"
                          },
                          "format": {
                            "type": "string",
                            "enum": [
                              "mp3_48k",
                              "mp3_96k",
                              "mp3_24k",
                              "wav_16k",
                              "wav_24k"
                            ],
                            "description": "Audio format"
                          },
                          "rate": {
                            "type": "string",
                            "description": "Speech rate (e.g., +10%)"
                          },
                          "volume": {
                            "type": "string",
                            "description": "Volume level (e.g., +10%)"
                          },
                          "pitch": {
                            "type": "string",
                            "description": "Pitch adjustment (e.g., +10Hz)"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Audio file",
                    "content": {
                      "audio/mpeg": {
                        "schema": {
                          "type": "string",
                          "format": "binary"
                        }
                      }
                    }
                  },
                  "400": {
                    "description": "Bad request",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "ok": {
                              "type": "boolean"
                            },
                            "error": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  },
                  "401": {
                    "description": "Unauthorized"
                  },
                  "429": {
                    "description": "Rate limited"
                  }
                }
              }
            }
          },
          "components": {
            "securitySchemes": {
              "ApiKeyAuth": {
                "type": "apiKey",
                "in": "header",
                "name": "X-API-Key"
              }
            }
          }
        }
      },
      {
        "name": "Web Documentation Interface",
        "description": "Interactive web interface for testing the TTS API with voice selection and real-time audio playback",
        "files": [
          "app.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "ODIADEV Edge-TTS Web Interface",
            "version": "1.0.0",
            "description": "Web-based documentation and testing interface"
          },
          "paths": {
            "/docs": {
              "get": {
                "summary": "Get web interface",
                "description": "Returns HTML page with interactive TTS testing interface",
                "responses": {
                  "200": {
                    "description": "HTML page",
                    "content": {
                      "text/html": {
                        "schema": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Root API",
        "description": "API root endpoint providing basic information and available endpoints",
        "files": [
          "app.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "info": {
            "title": "ODIADEV Edge-TTS Root API",
            "version": "1.0.0",
            "description": "Root endpoint for ODIADEV Edge-TTS system"
          },
          "paths": {
            "/": {
              "get": {
                "summary": "Get API information",
                "description": "Returns basic API information and available endpoints",
                "responses": {
                  "200": {
                    "description": "API information",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "ok": {
                              "type": "boolean"
                            },
                            "message": {
                              "type": "string"
                            },
                            "docs": {
                              "type": "string"
                            },
                            "health": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
